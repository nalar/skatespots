doctype html
html
	head
		link(rel='stylesheet' href='/css/style.css')
		script(src='https://code.jquery.com/jquery-2.2.0.min.js')
	body
		#map
			script.
				$( document ).ready(function() {
				console.log( "ready!" );
				})

			script(type='text/javascript').
				var map;
				
				function initMap() {
				
				map = new google.maps.Map(document.getElementById('map'), {
				center: {lat: 52.4, lng: 4.92},
				zoom: 12
				});

				map.data.loadGeoJson('/skatespots.json')

				map.data.forEach(function(feature){
					console.log('hello')
				})

				map.data.setStyle(function(feature) {
					var type = feature.getProperty('type');
					var iconurl;
					if(type === 'rail'){
						iconurl = '/icons/rail.png';
					} else if(type === 'curb'){
						iconurl = '/icons/curb.png'
					} else if(type === 'ledge'){
						iconurl = '/icons/ledge.png'
					} else if(type === 'bank'){
						iconurl = '/icons/bank.png'
					} else if(type === 'park'){
						iconurl = '/icons/park.png'
					} else if(type === 'shop'){
						iconurl = '/icons/shop.png'
					} else{
						iconurl = '/icons/general.png'
					}
					return {
						icon: iconurl
					};
				});

				map.data.addListener('click', function(event) {
					$('#spots').html("");
					event.feature.forEachProperty(function(property){
						$('#spots').append('<br>').append(property)
					})
				});
				}

			script(async defer src='https://maps.googleapis.com/maps/api/js?key=AIzaSyDmSbvLztiTx63qBwEO3JIzGZWWMmIYTh0&callback=initMap')
		#rightbar
			#header
				h1 Welcome
			if username != undefined
				#userinfo
				p Welcome back #{username}

				form(name="logout" action="/logout" method="post")
					button(type="submit" id="logout") Logout
			else
				#login
					h2 Login
						form(name="login" action="/login" method="post")
							input(type="text" name="username" placeholder="Username")
							br
							input(type="password" name="userpass" placeholder="Password")
							br
							button(type="submit" id="login" ) Login
			#registration
				a(href="/adduser") Click here to register

			#spots
				